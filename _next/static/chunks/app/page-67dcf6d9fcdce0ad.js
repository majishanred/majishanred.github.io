(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3379:function(e,n,t){Promise.resolve().then(t.bind(t,8168))},8168:function(e,n,t){"use strict";t.r(n),t.d(n,{TransactionComponent:function(){return P}});var r=t(7437),i=t(2265);let s=null,a={value:()=>s,subscribe:e=>{function n(n){s||(s="MetaMask"==n.detail.info.name?n.detail:null,e())}return window.addEventListener("eip6963:announceProvider",n),window.dispatchEvent(new Event("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",n)}},l=()=>(0,i.useSyncExternalStore)(a.subscribe,a.value,a.value);var c=t(1403),o=t(4272),d=t(3447),u=t(6285),h=t(4784),x=t(36),p=t(239),v=t(144),m=t(9905),j=t(6730),b=t(7142);function Z(e){let{currentChain:n,setCurrentChain:t,metaMaskProvider:s}=e,a={"0x1":"eth","0xaa36a7":"sepolia","0x38":"bnb","0x61":"bnb smartchain testnet"},[l,o]=(0,i.useState)(!1);async function d(e){try{await (null==s?void 0:s.provider.request({method:"wallet_switchEthereumChain",params:[{chainId:e}]})),t(e)}catch(e){console.error(e)}}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.Z,{disableGutters:!0,children:[n?(0,r.jsx)(h.Z,{label:a[n].toUpperCase(),variant:"outlined",color:"primary",clickable:!1,sx:{marginRight:1}}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(u.Z,{onClick:()=>o(!0),variant:"outlined",children:"Change network"})]}),(0,r.jsxs)(x.Z,{onClose:()=>o(!1),open:l,children:[(0,r.jsx)(p.Z,{children:"Select network"}),(0,r.jsx)(v.Z,{children:Object.entries(a).map(e=>e[0]!=n?(0,r.jsx)(m.ZP,{disableGutters:!0,children:(0,r.jsx)(j.Z,{onClick:()=>{d(e[0]),o(!1)},children:e[1].toUpperCase()})},e[0]):(0,r.jsx)(m.ZP,{disableGutters:!0,children:(0,r.jsxs)(j.Z,{onClick:()=>{d(e[0]),o(!1)},children:[(0,r.jsx)(b.Z,{color:"primary"}),(0,r.jsx)("span",{children:e[1].toUpperCase()})]})},e[0]))})]})]})}var f=t(2840);let g=e=>(0,f.Z)(e,16).dividedBy((0,f.Z)("1000000000000000000")).toFixed(2),C=e=>{let n=(0,f.Z)(e).multipliedBy(1e18);return(n=n.isPositive()?n:n.multipliedBy(-1)).toString(16)},k=e=>"0x"+e,y=e=>{let n=e.slice(0,2)+e.slice(2);return"".concat(n.substring(0,5),"...").concat(n.substring(39))};function w(e){let{currentAccount:n,setCurrentAccount:t,metaMaskProvider:s}=e,[a,l]=(0,i.useState)(),[o,d]=(0,i.useState)(!1);async function Z(){let e=await (null==s?void 0:s.provider.request({method:"eth_requestAccounts"}).catch(console.error));null!=e&&l(e)}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.Z,{sx:{marginTop:2,display:"flex"},disableGutters:!0,children:[n?(0,r.jsx)(h.Z,{label:y(n),variant:"outlined",color:"primary",sx:{marginRight:1},clickable:!1}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(u.Z,{onClick:()=>d(!0),variant:"outlined",children:a?"Change account":"Load accounts to begin"})]}),(0,r.jsxs)(x.Z,{onClose:()=>d(!1),open:o,children:[(0,r.jsx)(p.Z,{children:"Select account"}),(0,r.jsxs)(v.Z,{children:[null==a?void 0:a.map(e=>e!=n?(0,r.jsx)(m.ZP,{disableGutters:!0,children:(0,r.jsx)(j.Z,{onClick:()=>{t(e),d(!1)},children:y(e)})},e):(0,r.jsx)(m.ZP,{disableGutters:!0,children:(0,r.jsxs)(j.Z,{onClick:()=>{d(!1)},children:[(0,r.jsx)(b.Z,{color:"primary",sx:{marginRight:1}}),(0,r.jsx)("span",{children:y(e)})]})},e)),(0,r.jsx)(m.ZP,{children:(0,r.jsx)(j.Z,{onClick:()=>Z(),children:(0,r.jsx)("span",{children:a?"Reupload accounts":"Load accounts"})})})]})]})]})}var E=t(3041);let P=()=>{let e=l(),[n,t]=(0,i.useState)(),[s,a]=(0,i.useState)(),[h,x]=(0,i.useState)(),p=(0,i.useRef)(null),v=(0,i.useRef)(null);async function m(){let t=document.getElementById("send-transaction-button");try{if(""==v.current.value||""==p.current.value)return;v.current.disabled=!0,p.current.disabled=!0,t.disabled=!0,await (null==e?void 0:e.provider.request({method:"eth_sendTransaction",params:[{from:n,to:p.current.value,value:k(C(v.current.value))}]})),t.disabled=!1,v.current.disabled=!1,p.current.disabled=!1;let r=async()=>{let t=await (null==e?void 0:e.provider.request({method:"eth_getBalance",params:[n,"pending"]}).catch(console.error));x(t)};v.current.value="",p.current.value="",r()}catch(e){console.log(e),t.disabled=!1,v.current.disabled=!1,p.current.disabled=!1,v.current.value="",p.current.value=""}}return(0,i.useEffect)(()=>{void 0!=n&&(async()=>{x(await (null==e?void 0:e.provider.request({method:"eth_getBalance",params:[n,"latest"]}).catch(console.error)))})()},[n,s]),(0,i.useEffect)(()=>{let e=document.getElementById("send-transaction-button");s&&n?e.disabled=!1:e.disabled=!0},[n,s]),(0,i.useEffect)(()=>{null==e||e.provider.request({method:"eth_chainId"}).then(e=>a(e)).catch(console.error)},[e]),(0,r.jsxs)(c.Z,{maxWidth:"sm",sx:{paddingTop:"50px"},children:[(0,r.jsx)(Z,{currentChain:s,setCurrentChain:a,metaMaskProvider:e}),(0,r.jsx)(w,{currentAccount:n,setCurrentAccount:t,metaMaskProvider:e}),(0,r.jsxs)(o.Z,{sx:{marginTop:2},children:[h?(0,r.jsx)(o.Z,{children:(0,r.jsxs)("span",{children:["Current account balance: ",g(h)]})}):(0,r.jsx)(r.Fragment,{}),(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(d.Z,{label:"Value",id:"value-input",variant:"outlined",fullWidth:!0,inputRef:v,sx:{marginTop:2}}),(0,r.jsx)(d.Z,{label:"To",id:"addres-input",variant:"outlined",sx:{marginTop:2},fullWidth:!0,inputRef:p}),(0,r.jsxs)(u.Z,{id:"send-transaction-button",color:"primary",variant:"contained",fullWidth:!0,sx:{marginTop:2},onClick:()=>m(),children:[(0,r.jsx)("span",{children:"Send"}),(0,r.jsx)(E.Z,{})]})]})]})]})}}},function(e){e.O(0,[490,885,971,69,744],function(){return e(e.s=3379)}),_N_E=e.O()}]);